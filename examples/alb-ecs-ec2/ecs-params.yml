version: 1
task_definition:
  ecs_network_mode: bridge
  task_role_arn: ecsTaskExecutionRole
  task_execution_role: ecsTaskExecutionRole
  services:
    nginx:
      essential: true
      cpu_shares: 1024
      mem_reservation: 900MB
      # secrets:
      #   - value_from: /test/prod/pass
      #     name: DB_PASS
run_params:
  task_placement:
    strategy:
      - type: spread
        field: attribute:ecs.availability-zone
      - type: spread
        field: instanceId
